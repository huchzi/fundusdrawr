---
title: "Test SVG with xml2"
output: html_notebook
---

```{r}

library(xml2)
library(here)

i_am("R/xml_experiments.Rmd")

```

```{r}

test <- read_xml(here("inst", "fundusskizze.svg"))
xml_find_first(test, "//*[@id='Ora']", ns)
xml_find_all(test, "*") |> xml_attr("id")

```

```{r}

lattice_path <- read_xml('<defs> <path id="bogen" d="M 50,100 A 100,100 0 0,1 250,100" /> </defs>')

lattice <- read_xml('<svg> <defs> <path id="bogen" d="M 110,200 A 95,95 0 0,1 200,110" /> </defs>
<text font-size="20" fill="black">
    <textPath href="#bogen">XXXXXXXXXX</textPath>
  </text>
<path href="#bogen" stroke="black"/></svg>')

lattice_border <- read_xml('<svg> <path d="
M 115,200 
A 85,85 0 0,1 200,115
A 5,5 0 0,0 200,95
A 105,105 0 0,0 95,200
A 5,5 0 0,0 115,200
" 
fill="none"
stroke="black"
stroke-width="2"/> 
</svg>')

xml_add_child(test, lattice) 
xml_add_child(test, lattice_border) 
test |> as.character() |> HTML()

```

